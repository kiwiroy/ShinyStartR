Shiny template1
===============

This template uses the R package [shinydashboard](https://cran.r-project.org/web/packages/shinydashboard/index.html) to provide an enhanced interface. It outputs interface information, session information, and a help page to shiny documentation.

See [RStudio shinydashboard](https://rstudio.github.io/shinydashboard/) for more information.


File structure
--------------

The template generates a [ui.R](https://github.com/PlantandFoodResearch/PFRdataCraft/blob/master/RWorkshops/DataVisualization/Part_2/examples/template2/ui.R) (user interface) [server.R](https://github.com/PlantandFoodResearch/PFRdataCraft/blob/master/RWorkshops/DataVisualization/Part_2/examples/template2/server.R) (server code), and [global.R](https://github.com/PlantandFoodResearch/PFRdataCraft/blob/master/RWorkshops/DataVisualization/Part_2/examples/template2/global.R) (global variables) and an optional [DESCRIPTION](https://github.com/PlantandFoodResearch/PFRdataCraft/blob/master/RWorkshops/DataVisualization/Part_2/examples/template2/DESCRIPTION) file. It also creates a subdirectory called [tests](https://github.com/PlantandFoodResearch/PFRdataCraft/tree/master/RWorkshops/DataVisualization/Part_2/examples/template2/tests) to run a test-suite of tests defined in [tests/testthat](https://github.com/PlantandFoodResearch/PFRdataCraft/tree/master/RWorkshops/DataVisualization/Part_2/examples/template2/tests/testthat).


```bash
ls -lR
.:
total 130
-rw-r--r--. 1 hramwd powerplant   69 Mar 24 00:06 DESCRIPTION
-rw-r--r--. 1 hramwd powerplant  145 Mar 24 00:06 global.R
-rw-r--r--. 1 hramwd powerplant 1967 Mar 27 09:48 README.md
-rw-r--r--. 1 hramwd powerplant  620 Mar 24 00:06 server.R
drwxr-sr-x. 3 hramwd powerplant   54 Mar 25 19:41 tests
-rw-r--r--. 1 hramwd powerplant  948 Mar 24 00:06 ui.R

./tests:
total 28
drwxr-sr-x. 2 hramwd powerplant   58 Mar 27 09:48 testthat
-rw-r--r--. 1 hramwd powerplant 1042 Mar 25 19:41 testthat.R

./tests/testthat:
total 51
-rw-r--r--. 1 hramwd powerplant  239 Mar 24 00:06 test-global.R
-rw-r--r--. 1 hramwd powerplant 1922 Mar 27 09:48 test-ui.R
```

## Usage

1. Modify [ui.R](https://github.com/PlantandFoodResearch/PFRdataCraft/blob/master/RWorkshops/DataVisualization/Part_2/examples/template2/ui.R) (user interface) [server.R](https://github.com/PlantandFoodResearch/PFRdataCraft/blob/master/RWorkshops/DataVisualization/Part_2/examples/template2/server.R) (server code), and [global.R](https://github.com/PlantandFoodResearch/PFRdataCraft/blob/master/RWorkshops/DataVisualization/Part_2/examples/template2/global.R) (global variables) for your shiny application.

2. Generate a suite of unit tests applicable to your shiny application
by modifying the tests in [tests/testthat](https://github.com/PlantandFoodResearch/PFRdataCraft/tree/master/RWorkshops/DataVisualization/Part_2/examples/template2/tests/testthat)

3. Create a README.md for your shiny application. Also include your session information so this can be compared to contributed packages versions on powerplant
servers as R and contributed packages develop over time.


```R
> sessionInfo()
R version 3.3.3 (2017-03-06)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: macOS  10.13.1

locale:
[1] en_NZ.UTF-8/en_NZ.UTF-8/en_NZ.UTF-8/C/en_NZ.UTF-8/en_NZ.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] iptools_0.4.0

loaded via a namespace (and not attached):
[1] AsioHeaders_1.11.0-1 ISOcodes_2017.09.27  tools_3.3.3          Rcpp_0.12.14
```


## Unit testing

The subdirectory [test](RWorkshops/DataVisualization/Part_2/examples/template1/tests) contains a function [testthat.R](RWorkshops/DataVisualization/Part_2/examples/template1/tests/testthat.R) which runs available unit
tests in [test/testthat](RWorkshops/DataVisualization/Part_2/examples/template1/tests/testthat).

Individual test files can be run interactively, or the entire suite run from the command line;


```bash
$ cd PFRdataCraft/RWorkshops/DataVisualization/Part_2/examples/template1/tests


## Two unit tests pass
$ Rscript testthat.R
Test global.R functions: ..
Test ui.R interface: ......

DONE ===========================================================================
```

The unit test `test-ui.R` searches for and extracts all observed `<input ...>` html fields in the ui interface,
and tests them against a set of expected fields. If the interface changes by either altering expected `<input ..>` fields,
or adding new inputs without adding additional tests, tests will fail.